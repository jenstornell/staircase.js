var staircase=function(){var c={},a={};return c.init=function(e){a=Object.assign({},c.defaults(),e),console.log(a),document.addEventListener("DOMContentLoaded",function(e){document.querySelector("stair-case").dataset.staircaseId="/",c.ajax("/")})},c.defaults=function(){return{ajaxPath:"ajax.php",selector:"stair-case"}},c.ajax=function(e){data={},data.id=e;var t=JSON.stringify(data);fetch(a.ajaxPath,{method:"POST",body:t,headers:{"Content-Type":"application/json"}}).then(function(e){return e.text()}).then(function(e){var t=JSON.parse(e),a=c.createList(t);document.querySelector("[data-staircase-id]").appendChild(a),c.eventClickInfo()})},c.createList=function(e){var n=document.createElement("ul");return e.forEach(function(e){console.log(c.isFolder(e));var t=document.createElement("li"),a=document.createTextNode(e);t.appendChild(a),c.isFolder(e)&&(t.dataset.staircaseId=e.slice(0,-1)),n.appendChild(t)}),n},c.isFolder=function(e){return"/"==e[e.length-1]},c.eventClickInfo=function(){document.querySelectorAll("stair-case li").forEach(function(e){console.log(e),e.addEventListener("click",function(e){c.removeActive(),c.setActive(e.target);var t={};t.element=e.target,t.id=e.target.dataset.staircaseId,a.callback(e.target)})})},c.removeActive=function(){document.querySelectorAll("stair-case li").forEach(function(e){delete e.dataset.staircaseActive})},c.setActive=function(e){e.dataset.staircaseActive=""},c}();